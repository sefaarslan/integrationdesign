<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    
    <title>Adding Filter Parameters to Request URL using Groovy Script in SAP CPI | SapIntegrationDesign</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    

    
        <meta property="algolia:search" data-application-id="67IWBPGSH1" data-api-key="ed3c8b21037de847819416908709cc74" data-index-name="prod_sapintegrationdesign">
    

    

    

    

    

    
<link rel="stylesheet" href="/sapintegrationdesign/dist/build.css?v=1618369575286.css">




    <script>
        window.isPost = true
        window.aomori = {
            
            
            
        }
        window.aomori_logo_typed_animated = true
        window.aomori_search_algolia = true


    </script>

<meta name="generator" content="Hexo 5.4.0"></head>


<body>

    <div class="container">
    <header class="header">
        <div class="header-type">
            
            <div class="header-type-avatar avatar avatar-sm">
                <img src="https://png.pngtree.com/png-vector/20190309/ourlarge/pngtree-cloud-logo-design-template-vector-isolated-png-image_783722.jpg" alt="Sefa">
            </div>
            
            <div class="header-type-inner">
                
                    <div id="typed-strings" style="display:none">
                        <p>SapIntegrationDesign</p>
                    </div>
                    <a class="header-type-title" id="typed" href="/sapintegrationdesign"></a>
                

                
            </div>
        </div>
        <div class="header-menu">
            <div class="header-menu-inner">
                
                <a href="/sapintegrationdesign/">Home</a>
                
                <a href="/sapintegrationdesign/archives">Archives</a>
                
            </div>
            <div class="header-menu-social">
                
    <a class="social" target="_blank" href="">
        <box-icon type='' name=''></box-icon>
    </a>

    <a class="social" target="_blank" href="">
        <box-icon type='' name=''></box-icon>
    </a>

            </div>
        </div>

        <div class="header-menu-mobile">
            <div class="header-menu-mobile-inner" id="mobile-menu-open">
                <i class="icon icon-menu"></i>
            </div>
        </div>
    </header>

    <div class="header-menu-mobile-menu">
        <div class="header-menu-mobile-menu-bg"></div>
        <div class="header-menu-mobile-menu-wrap">
            <div class="header-menu-mobile-menu-inner">
                <div class="header-menu-mobile-menu-close" id="mobile-menu-close">
                    <i class="icon icon-cross"></i>
                </div>
                <div class="header-menu-mobile-menu-list">
                    
                    <a href="/sapintegrationdesign/">Home</a>
                    
                    <a href="/sapintegrationdesign/archives">Archives</a>
                    
                </div>
            </div>
        </div>
    </div>

</div>


    <div class="container">
        <div class="main">
            <section class="inner">
                <section class="inner-main">
                    <div class="post">
    <article id="post-cknrqkpoc0009gwllbd6i438i" class="article article-type-post" itemscope
    itemprop="blogPost">

    <div class="article-inner">

        
          
        

        

        
        <header class="article-header">
            
  
    <h1 class="article-title" itemprop="name">
      Adding Filter Parameters to Request URL using Groovy Script in SAP CPI
    </h1>
  

        </header>
        

        <div class="article-more-info article-more-info-post hairline">

            <div class="article-date">
  <time datetime="2021-04-21T15:43:44.000Z" itemprop="datePublished">2021-04-21</time>
</div>

            

            
      2kviews.
            

        </div>

        <div class="article-entry post-inner-html hairline" itemprop="articleBody">
            <p>We can invoke the data we want according to the structure of the relevant receiver service by filtering through the HTTPS sender adapter over the same url endpoint.Some special https request headers are added to exchange headers for further processing in integration flow.One of these is the CamelHttpQuery header. We will use it to use the filter parameter that we will add to the URL.<br>‘CamelHttpQuery : Refers to the query string that is contained in the request URL.In case a receiving adapter is used, this header can be used to dynamically change the URI to be called.’<br>Sample Request URL :<br>https://<iflow-tenant URL>/?$filter=<Field Name> eq ‘<Field Value>’<br>CamelHttpQuery = ?$filter=<Field Name> eq ‘<Field Value>’<br>Sample Scenario</p>
<p>In our scenario, we will call the ‘TimeAccount’ entity over the Success Factors adapter using the filter parameter on the request url. We will edit the ‘CamelHttpQuery’ header with a script. In this way, we will be able to filter on the field we want.<br>Configuration Steps<br>Step 1 : Defining a Groovy Script for configuring ‘CamelHttpQuery’<br>We get the filter from the CamelHttpQuery header and add it to the ‘filterKey’ header. In addition, when we want to call all data without using filtering, since there is no filter value on the address, the ‘filterKey’ header will be defined as empty. In this way, we will be able to invoke all the data over the same request url.<br>import com.sap.gateway.ip.core.customdev.util.Message;<br>import java.util.HashMap;<br>import java.io.*;<br>import javax.ws.rs.core.Context;def Message processData(Message message) {</p>
<pre><code>def body = message.getBody(java.lang.String) as String;
def uri = message.getHeaders().get(&quot;CamelHttpQuery&quot;);
if(uri != null &amp;&amp; !uri.isEmpty())&#123;
    message.setHeader(&quot;filterKey&quot;,uri);
    message.setBody(body);
    return message;
&#125;else &#123;
    message.setHeader(&quot;filterKey&quot;,&quot;&quot;);
    message.setBody(body);
    return message;
&#125; 
</code></pre>
<p>}<br>Step 2 : Configuring Receiver Success Factors Adapter<br>In this section, in the Proccesing tab/Query Options section ,we add the ‘filterKey’ header that we defined in the script to the filter section.</p>
<p>Testing from POSTMAN;<br>https://<iflow-tenant URL>/http/TimeAccount?$filter=userId eq ‘1’</p>
<p>References; <a href="https://help.sap.com/viewer/368c481cd6954bdfa5d0435479fd4eaf/Cloud/en-US/0ae4a78909c4479cbc3cc414250919de.html">https://help.sap.com/viewer/368c481cd6954bdfa5d0435479fd4eaf/Cloud/en-US/0ae4a78909c4479cbc3cc414250919de.html</a></p>

        </div>

    </div>

    

    

    

    

    

    
<nav class="article-nav">
  
    <a href="/sapintegrationdesign/2021/04/21/Configuring-User-Defined-Message-Search-in-SAP-CPI/" id="article-nav-newer" class="article-nav-link-wrap">
      <div class="article-nav-caption">下一篇</div>
      <div class="article-nav-title">
        
          Configuring User Defined Message Search in SAP CPI
        
      </div>
    </a>
  
  
    <a href="/sapintegrationdesign/2021/04/18/hello-world/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-caption">上一篇</div>
      <div class="article-nav-title">Hello World</div>
    </a>
  
</nav>


    <section class="share">
        <div class="share-title">SHARE</div>
        <a class="share-item" target="_blank"
            href="https://twitter.com/share?text=Adding Filter Parameters to Request URL using Groovy Script in SAP CPI - SapIntegrationDesign&url=https://sefaarslan.github.io/sapintegrationdesign/2021/04/21/Adding-Filter-Parameters-to-Request-URL-using-Groovy-Script-in-SAP-CPI/">
            <box-icon type='logo' name='twitter'></box-icon>
        </a>
        <a class="share-item" target="_blank"
            href="https://www.facebook.com/sharer.php?title=Adding Filter Parameters to Request URL using Groovy Script in SAP CPI - SapIntegrationDesign&u=https://sefaarslan.github.io/sapintegrationdesign/2021/04/21/Adding-Filter-Parameters-to-Request-URL-using-Groovy-Script-in-SAP-CPI/">
            <box-icon name='facebook-square' type='logo' ></box-icon>
        </a>
        <!-- <a class="share-item" target="_blank"
            href="https://service.weibo.com/share/share.php?title=Adding Filter Parameters to Request URL using Groovy Script in SAP CPI - SapIntegrationDesign&url=https://sefaarslan.github.io/sapintegrationdesign/2021/04/21/Adding-Filter-Parameters-to-Request-URL-using-Groovy-Script-in-SAP-CPI/&pic=">
            <div class="n-icon n-icon-weibo"></div>
        </a> -->
    </section>

</article>
This post's Visitor Counts is
   0
   views.

   <!-- hexo's local server only -->


<section class="comments comments-disqus">
    <div id="disqus_thread"></div>
    <script>
        ;(function () {
            // DON'T EDIT BELOW THIS LINE
            var d = document,
                s = d.createElement('script')
            s.src =
                'https://https-sefaarslan-github-io-sapintegrationdesign.disqus.com/embed.js'
            s.setAttribute('data-timestamp', +new Date())
            ;(d.head || d.body).appendChild(s)
        })()
    </script>
</section>












</div>
                </section>
            </section>

            
            <aside class="sidebar sidebar-search-fix">
            
                

    <div class="search">
    <div class="has-icon-right">
        <input type="text" class="form-input" id="search" placeholder="SEARCH" autocomplete="off">
        <div class="form-icon">
            <box-icon name='search' color="#3c4859"></box-icon>
        </div>
    </div>
    <div class="search-result" id="search-ps"></div>
</div>


<div class="widget" id="widget">
    
      
  <div class="widget-wrap">
    <div class="widget-inner">
      <div class="toc post-toc-html"></div>
    </div>
  </div>

    
      

    
      
  <div class="widget-wrap widget-tags">
    <div class="widget-title"><span>Tags</span></div>
    <div class="widget-inner">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/sapintegrationdesign/tags/diary/" rel="tag">diary</a></li><li class="tag-list-item"><a class="tag-list-link" href="/sapintegrationdesign/tags/program/" rel="tag">program</a></li><li class="tag-list-item"><a class="tag-list-link" href="/sapintegrationdesign/tags/web/" rel="tag">web</a></li></ul>
    </div>
  </div>


    
      
  <div class="widget-wrap widget-recent-posts">
    <div class="widget-title"><span>Recent Posts</span></div>
    <div class="widget-inner">
      <ul>
        
          <li>
            <a href="/sapintegrationdesign/2021/04/21/Configuring-User-Defined-Message-Search-in-SAP-CPI/">Configuring User Defined Message Search in SAP CPI</a>
          </li>
        
          <li>
            <a href="/sapintegrationdesign/2021/04/21/Adding-Filter-Parameters-to-Request-URL-using-Groovy-Script-in-SAP-CPI/">Adding Filter Parameters to Request URL using Groovy Script in SAP CPI</a>
          </li>
        
          <li>
            <a href="/sapintegrationdesign/2021/04/18/hello-world/">Hello World</a>
          </li>
        
      </ul>
    </div>
  </div>

    
      
  <div class="widget-wrap widget-archive">
    <div class="widget-title"><span>Archive</span></div>
    <div class="widget-inner">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/sapintegrationdesign/archives/2021/04/">2021</a></li></ul>
    </div>
  </div>


    
</div>

<div id="backtop"><i class="icon icon-arrow-up"></i></div>
            </aside>
        </div>
    </div>

    <footer class="footer">
    <div class="footer-wave">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"><path fill="#3c4859" fill-opacity="1" d="M0,160L60,181.3C120,203,240,245,360,240C480,235,600,181,720,186.7C840,192,960,256,1080,261.3C1200,267,1320,213,1380,186.7L1440,160L1440,320L1380,320C1320,320,1200,320,1080,320C960,320,840,320,720,320C600,320,480,320,360,320C240,320,120,320,60,320L0,320Z"></path></svg>
    </div>

    <div class="footer-wrap">
        <div class="footer-inner"> 
            SapIntegrationDesign &copy; 2021<br>
            Powered By Hexo · Theme By <a href="https://github.com/lh1me/hexo-theme-aomori" target="_blank">Aomori</a>
        </div>
    </div>

</footer>






<script src="/sapintegrationdesign/dist/build.js?1618369575286.js"></script>


<script src="/sapintegrationdesign/dist/custom.js?1618369575286.js"></script>



<!-- 百度链接提交 -->
<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        }
        else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>







</body>

</html>